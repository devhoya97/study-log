# 질답 형식으로 요약

<details>
<summary>하드웨어 인터럽트와 소프트웨어 인터럽트의 차이에 대해 설명해주세요.</summary>

하드웨어 인터럽트는 입출력장치의 컨트롤러가 작업이 완료됐음을 CPU에게 알리기 위해 인터럽트 라인을 세팅하는 작업이고
소프트웨어 인터럽트는 프로세스가 실행 중 exception이 발생하거나 system call로 운영체제의 도움이 필요할 경우
운영체제에게 CPU 점유권을 넘기는 과정입니다.
</details>

<hr style="height: 3px; background-color: black; border: none;">

# 이론 정리

### 컴퓨터 시스템의 구조
- 내부 장치
  - CPU, 메모리
- 외부 장치(입출력 장치)
  - 디스크, 키보드, 모니터, 네트워크 장치
- 컴퓨터는 외부장치에서 내부장치로 데이터를 읽어와 연산을 수행한 후, 그 결과를 외부장치로 다시 내보내는 방식으로 업무를 처리
- 메모리 및 입출력 장치는 각자 컨트롤러를 가진다.
  - 컨트롤러는 장치로부터 들어오고 나가는 데이터를 임시로 저장하기 위한 작은 메모리(로컬버퍼)를 가진다.
  - 디스크에서 데이터를 읽어오는 경우, 우선 로컬버퍼에 데이터가 임시로 저장된 후 메모리에 전달된다.

### CPU 연산과 IO 연산
- 입출력 장치들의 IO 연산은 입출력 컨트롤러가 담당하고, 컴퓨터 내에서 수행되는 연산은 메인 CPU가 담당한다.
  - 입출력 장치의 연산과 메인 CPU의 연산은 서로 다른 곳에서 발생하므로 동시 수행이 가능하다.
- 장치에서 로컬버퍼로 데이터를 읽어오는 일은 컨트롤러가 담당한다.
  - ex. 디스크 컨트롤러가 디스크에서 로컬버퍼로 데이터를 읽어온 후, 인터럽트를 발생시켜 CPU에 보고한다.
- CPU는 매시점 메모리에서 명령을 하나씩 읽어와서 수행하는데, CPU 옆에는 인터럽트 라인이 있다.
  - CPU는 명령 하나를 수행할 때마다 인터럽트가 발생했는지 확인한다. 
  - 인터럽트 라인에 신호가 들어오면 CPU는 하던 일을 멈추고 인터럽트를 먼저 처리한다.

### 인터럽트의 일반적 기능
- 운영체제는 각종 하드웨어 및 소프트웨어 자원 관리뿐 아니라 사용자 프로그램에 필요한 서비스도 제공한다.
  - 운영체제가 해야 할 일들은 운영체제 개발자가 미리 프로그래밍해서 커널 내에 포함시켜뒀다.
  - 그 중 하나가 인터럽트 처리 루틴이다.
  - CPU의 인터럽트 라인은 번호에 맞게 여러개 존재하는데, 인터럽트가 발생하면 인터럽트 벡터와 번호에 따라 인터럽트 처리 루틴을 찾아간다.
- 하드웨어 인터럽트
  - 일반적으로 인터럽트라고 하면 하드웨어 인터럽트를 의미한다. 
  - 컨트롤러 등 하드웨어 장치가 CPU의 인터럽트 라인을 세팅한다.
- 소프트웨어 인터럽트(Trap)
  - 프로세스가 CPU의 인터럽트 라인을 세팅한다.

### 소프트웨어 인터럽트(Trap)
- exception
  - 아래와 같은 경우를 처리하기 위해 발생시키는 인터럽트
    - 비정상적인 작업 시도(ex.0으로 나누기)
    - 권한이 없는 작업 시도(ex. 자신의 메모리 영역 바깥에 접근)
  - exception은 사용자 프로그램이 발생시키는 것이 아니라, CPU가 예외 상황을 감지하여 자동으로 발생?
- system call
  - 사용자 프로그램이 운영체제 내부에 정의된 코드를 실행하고 싶을 때 운영체제에 서비스를 요청하는 방법
  - 사용자 프로그램 자신의 코드는 직접 CPU를 가지고 실행하지만, 커널에 있는 코드를 사용자 프로그램이 실행하고자 할 때에는 CPU 제어권을 운영체제로 넘겨 실행
