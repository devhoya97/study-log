### 웹캐싱
- 웹 사용자에 의해 빈번히 요청되는 데이터를 사용자와 지리적으로 가까운 웹캐시 서버에 보관해 빠른 서비스를 가능하게 하는 기법
- 프록시서버
  - 통상적으로 일개 그룹의 웹 사용자에 대한 서비스 지연시간을 줄이기 위해 사용
  - 궁극적으로 네트워크의 대역폭 절약과 함께 웹서버의 부하를 줄이는 역할 담당
- 역방향 프록시 캐시
  - 일개 그룹에 속한 웹서버의 객체들을 캐싱하여 서버의 부하를 직접적으로 줄이는 역할
  - 궁극적으로 웹 사용자의 지연시간을 줄이는 역할을 하게 됨
  - Nginx가 로드밸런서 역할을 수행할 때, 역방향 프록시 캐시 역할도 할 수 있는 듯?
- 캐싱 시스템의 성능에 있어 캐시 교체 알고리즘이 중요한 역할을 한다.
  - 버퍼캐싱, 페이징 등 전통적인 캐싱 시스템에서 LRU 알고리즘 등으로 연구되어 온 알고리즘이 웹캐시에서는 잘 안먹힌다.
  - 웹캐시는 기존의 캐싱 시스템과 다른 여러 가지 독자적인 특성이 있어 새로운 교체 알고리즘이 필요하다.
- 캐시에 보관된 웹 객체는 근원지 서버에서 변경될 수 있으므로 캐싱 시스템은 통상적으로 일관성 유지 기법을 필요로 한다.
  - 일관성 유지 기법은 사용자가 요청한 웹 객체가 캐싱되어 있는 경우 이 객체가 근원지 서버에 있는 객체와 동일한지를 확인해서 사용자에게 최신의 정보를 전달하기 위해 필요
  - 전통적인 컴퓨터 시스템은 캐시 일관성을 유지하지 못하면 시스템 전체에 치명적인 문제를 발생시킬 수 있다.
  - 반면 웹캐시에서는 일관성 유지 여부가 큰 문제를 야기하지 않는 경우가 대부분이며 일관성 불일치에 대한 의미가 전통적인 시스템에서와 차이가 있다.

### 웹캐시의 교체 알고리즘
- 전통적인 캐싱 환경에서와 달리 웹캐싱에서는 캐싱 대상이 되는 객체들의 크기와 인출 비용이 균일하지 않기 때문에 효율적인 교체 알고리즘의 설계에 어려움이 따른다.
  - 따라서 효율적인 캐시 교체 알고리즘은 이와 같은 객체의 이질성을 고려할 수 있어야 한다.
- 교체 알고리즘의 성능 척도
  - 전통적인 캐싱 환경에서는 cache hit의 효용이 모든 객체에 대해 동일하므로 캐시 교체 알고리즘의 목표는 hit rate을 높이는 것으로 충분했다.
  - 웹캐싱에서는 cache hit 효용이 객체마다 다르므로, 객체들의 참조 가능성과 이질성을 함께 고려해서 개체들의 가치를 평가해야 한다.

### 참조 가능성의 예측
- LRFU (Least Recently Frequently Used)
  - LRU와 LFU에서 발생할 수 있는 문제점을 해결하기 위해 등장
  - 객체의 참조 가능성 p(i)를 계산할 때 객체 i에 대한 모든 과거 참조 시점과 참조 횟수를 다 이용한다.
  - LRU는 리스트를 이용해 O(1)로 계산이 가능하고 LFU는 힙을 이용해 O(logn)으로 계산이 가능한 반면, LRFU는 O(n)이 필요하다.
    - 매 순간 객체들의 가치평가를 새로 해줘야 하기 때문에 힙을 이용한 구현이 불가능하기 때문이다.
  - 최근 참조 시각을 이용하는 알고리즘이지만 참조되지 않은 객체들 간의 대소 관계가 변하지 않는 성질을 가진 알고리즘으로 근사하여 사용하면, 힙으로 구현 가능

### 웹캐시의 일관성 유지 기법
- 캐싱된 웹 객체가 근원지 서버에서 변경될 수 있으므로 웹캐시에는 사용자에게 유효한 정보를 전달하기 위한 일관성 유지 기법이 필요하다.
- 웹캐시의 일관성 유지를 위한 전형적인 기법
  - polling every time
    - 강한 일관성 유지 기법
    - 캐시 내 이미 존재하는 객체에 대한 매 요청마다 근원지 서버에 객체의 변경 여부를 확인
    - 객체의 크기가 크다면, 의미가 있을 듯?
  - invalidation
    - 강한 일관성 유지 기법
    - 근원지 서버가 자신의 객체를 캐싱하고 있는 모든 프록시서버를 기록해두었다가, 해당 객체가 변경된 경우, 해당 프록시서버들에게 변경 사실을 알려주는 방법
  - adpative TTL
    - 전통적인 컴퓨터 시스템에서와 달리 웹캐시에서는 일관성의 불일치가 큰 문제를 야기하지 않는 경우가 대부분이다.
    - 따라서 adaptive TTL 기법과 같은 약한 일관성 유지 기법을 사용한다.
    - 캐시 내 객체에 대한 최종 변경 시각과 최종 확인 시각을 고려해서 변경되었을 가능성이 높다고 판단되는 경우에만 근원지 서버에 변경 여부를 확인
