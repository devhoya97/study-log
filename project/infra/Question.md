# CI/CD
### CI가 무엇인가요?
지속적 통합으로, 최대한 자주 메인 코드베이스에 변경사항을 merge 시키는 개발 방식입니다. 이를 통해 빌드,통합 오류를 가능한 한 빠르게 찾아낼 수 있습니다.
merge가 필요할 때마다 수동으로 빌드나 테스트를 돌리기 번거롭고 실수의 여지가 있으므로 Github Actions와 같은 자동화를 위한 도구를 사용합니다.

### CD가 무엇인가요?
Continuous Delivery는 프로덕션 코드에 직접 빌드 결과를 제공하기까지만 하며, 배포를 위해 추가적인 작업이 필요합니다.
Continuous Deployment는 배포까지 파이프라인에 포함시키는 방식으로, 프로젝트에서는 이를 선택했습니다.
CD를 위해선 일반적으로 Github Runner가 서버애플리케이션을 실행 중인 인스턴스로 ssh 접속이 가능하도록 인바운드 규칙을 허용해야 합니다.
하지만 우아한테크코스에서 진행했던 프로젝트에서는 인스턴스의 22번 포트에 대한 인바운드 규칙이 교육장 내의 IP만 허용하도록 강제되었기 때문에
polling 기반의 self hosted runner 방식을 활용해 인스턴스가 주기적으로 Github 서버에게 배포작업이 필요한지 묻는 요청을 보냄으로써
CD가 가능하도록 구현했습니다.

### github actions는 무엇인가요?
CI/CD를 자동화할 수 있는 도구 중 하나입니다.
특히 step에는 shell script를 작성해야 하는데, 자주 사용되는 스크립트 코드를 Actions로 제공해줘서 편리합니다.
젠킨스와의 비교? 깃허브액션만의 특징과 장단점을 말할 수 있으면 좋겠다.

# Docker
### 컨테이너와 가상머신의 차이에 대해 설명해주세요.
가상머신과 컨테이너 모두 하나의 컴퓨터에서 격리된 환경을 여러 개 생성하여 프로그램 실행 시 환경 종속적인 문제가 발생하지 않게 만들기 위해 사용됩니다.
가상머신의 경우 각 가상머신마다 운영체제를 설치해줘야 하는데 용량도 크고, VM 위에서 동작하는 프로세스는 Guest OS, 하이퍼바이저를 거쳐 Host OS에 도달하므로 무겁습니다.
반면 컨테이너는 Host OS위에서 동작하는 도커와 같은 컨테이너 플랫폼 위에서 독립적으로 실행되므로 가상머신에 비해 가볍습니다.

### Docker를 사용한 이유는 무엇인가요?
도커 이미지는 운영 환경을 통째로 패키징하기 때문에 어느 서버에서 실행하든 동일한 환경을 보장합니다.
따라서 도커 이미지를 사용하면 개발 환경과 운영 환경 간의 차이를 최소화할 수 있으며 같은 맥락으로 scale out 또한 쉽게 할 수 있습니다.
실제로 프로젝트에서 운영 서버를 한 대 늘릴 때, 도커 이미지를 사용해서 환경 차이로 인한 문제를 겪지 않고 손쉽게 배포가 가능했습니다.

### 꼬리질문1. 도커를 사용하지 않고 scale out했을 때, 발생할 수 있는 환경 문제가 무엇이 있나요?
애플리케이션이 실행되려면 여러 패키지와 라이브러리가 필요할 수 있고, 리눅스의 user space까지 설정이 필요할 수 있습니다.
도커 이미지에는 애플리케이션 실행을 위해 필요한 모든 의존성이 포함되어 있어서, 이를 기반으로 컨테이너를 만들기 때문에 서버마다 별도로 환경을 설정할 필요가 없습니다.
또한 리눅스 이미지 기준으로 리눅스의 사용자 공간까지 이미지에 담기기 때문에 인스턴스마다 별도로 OS와 관련된 환경설정을 해줄 필요가 없습니다.

### Github Actions의 CD Workflow에서 docker compose를 사용한 이유가 무엇인가요?
개발 초기 단계에는 하나의 EC2 인스턴스에 스프링애플리케이션과 MySQL을 모두 실행시키고 있었습니다.
두 개의 이미지를 한 번에 실행시키면 편하지 않을까? 하는 생각으로 docker compose를 사용했는데요.
지금 와서 생각해보면 서버 애플리케이션에 배포가 발생한다고 해서 항상 MySQL을 새로 띄울 필요는 없으므로
docker compose를 사용할 필요는 없었던 것 같습니다. 

### 꼬리질문. 그럼 docker compose를 사용하기 적절한 상황은 뭐가 있을까요?
scale out이 잦아서 인스턴스마다 mysql을 한 번 실행시켜주기 위한 비용이 높은 경우엔 
CD Workflow에서 docker compose를 사용하는게 편리할 것 같습니다.
또는 reader와 writer가 분리되거나 redis와 같은 캐시도 사용하는 경우, 실제로 한 번만 실행하면 된다고 해도 설정이 복잡할 수 있는데 
이런 경우에도 docker compose로 이들의 실행을 한 번에 통합시켜 놓으면 편리할 것 같습니다.
