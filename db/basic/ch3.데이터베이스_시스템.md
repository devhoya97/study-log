### 데이터베이스 시스템
DB + DBMS + 데이터 언어 + 사용자

### 스키마
- DB에 저장되는 데이터 구조와 제약조건을 정의한 것
- 스키마에 따라 DB에 실제로 저장된 값을 인스턴스라 부른다.

### 3단계 데이터베이스 구조
내부 단계에서 외부 단계로 갈수록 추상화 레벨이 높아진다.
- 외부 단계
  - 사용자 관점에서 이해하고 표현
  - 하나의 개념 스키마에 대해 여러 사용자가 각자의 외부 스키마를 가질 수 있다.
  - 불필요한 데이터 접근을 사전에 막아 보안 측면에서 효과적
- 개념 단계
  - 조직 전체 관점에서 이해하고 표현
  - 개념 스키마
  - 데이터를 물리적으로 저장하는 방법이나 데이터 저장 장치와는 독립적
- 내부 단계
  - DB를 디스크 같은 저장 장치 관점에서 이해하고 표현
  - DB는 저장 장치에 파일 형태로 저장됨
  - 내부 스키마
    - 파일에 데이터를 저장하는 레코드의 구조, 레코드를 구성하는 필드 크기, 인덱스를 이용한 레코드 접근 경로 등을 정의

### 논리적 데이터 독립성
- 개념 스키마가 변경되더라도 외부 스키마가 영향을 받지 않는 것
- 외부 스키마와 개념 스키마를 분리하고, 맵핑 관계를 application interface에 따로 정의해줬기에 가능

### 물리적 데이터 독립성
- 내부 스키마가 변경되더라도 개념 스키마가 영향을 받지 않는 것
- 개념 스키마와 외부 스키마를 분리하고, 맵핑 관계를 storage interface에 따로 정의해줬기에 가능

### 데이터 사전(data dictionary) == 시스템 카탈로그(system catalog)
- DB에 저장되는 데이터에 관한 정보(세 가지 스키마 정보, 스키마 간의 사상 정보, 제약조건)를 저장하는 곳
- 데이터 사전에 저장된 데이터를 메타 데이터라고도 한다.
- 데이터 사전에 내용을 추가하는 것은 DBMS만이 가능하며, 사용자는 데이터 사전에 저장된 내용을 검색만 할 수 있다.

### 데이터 디렉터리
- 데이터 사전에 있는 데이터에 실제로 접근하는데 필요한 위치정보
- 데이터 사전과 데이터 디렉터리는 둘 다 시스템을 위한 DB라는 공통점이 있지만, 데이터 사전은 사용자가 접근할 수 있고 데이터 디렉터리는 시스템만 접근할 수 있다.

### DB 사용자
DB 이용 목적에 따라 아래와 같이 나뉜다.
- DB 관리자
- 최종 사용자
- 응용 프로그래머

### 데이터 정의어(DDL)
- 새로 만들려는 DB의 스키마를 설명하거나 이미 정의된 스키마의 구조나 제약조건 등을 변경 또는 삭제하고 싶어 이를 DBMS에 알릴 때 사용
- DDL로 정의된 스키마는 데이터 사전에 저장되고, 삭제나 수정이 발생하면 이 내용도 데이터 사전에 반영된다.

### 데이터 조작어(DML)
- 사용자가 데이터의 삽입, 삭제, 수정, 검색 등의 처리를 DBMS에 요구하기 위해 사용되는 데이터 언어
  - procedural DML : 사용자가 어떤 데이터를 원하고 해당 데이터를 얻으려면 어떻게 처리해야 하는지를 구체적으로 설명
  - nonprocedural DML : 사용자가 어떤 데이터를 원하는지만 설명하고 해당 데이터를 얻으려면 어떻게 처리해야 하는지는 DBMS에게 맡김
    - 선언적 언어(declarative language)라고도 부른다.

### 데이터 제어어(DCL)
- DB에 저장된 데이터를 여러 사용자가 무결성과 일관성을 유지하며 문제없이 공유할 수 있도록, 내부적으로 필요한 규칙이나 기법을 정의하는데 사용하는 데이터 언어
- DCL을 통해 무결성, 보안, 회복, 동시성을 보장한다.
- GRANT, REVOKE와 같이 권한과 관련된 명령어가 DCL인듯? 회복과 동시성을 위한 DCL은 뭐가 있지?
  - 지피티 말로는 회복의 경우 DCL이 아니라 TCL(rollback,savepoint,commit)이고, 
  - 동시성은 DBMS 내부 매커니즘(set transcation isolation level, lock table)이라는데 더 공부해보자

### DBMS = query processor + stored data manager
- query processor : 사용자의 데이터 처리 요구를 해석하여 처리
  - DDL compiler
    - DDL을 해석하고 stored data manager의 도움을 받아 새로운 db를 구축한다.
    - 스키마 정의는 데이터 사전에 저장한다.
  - DML precompiler
    - 응용 프로그램에 삽입된 DML을 추출하여 DML 컴파일러에 전달한다. 
  - DML compiler
    - DML을 runtime db processor가 이해할 수 있도록 해석한다.
  - runtime db processor
    - stored data manager를 통해 db에 접근하여 DML compiler로부터 받은 데이터 처리 요구를 db에서 실제로 실행한다.
  - transaction manager
    - db에 접근하는 과정에서 사용자의 접근 권한이 유효한지를 검사
    - db 무결성을 유지하기 위한 제약조건 위반 여부를 확인
    - 회복이나 병행 수행 관련 작업 담당
- stored data manager
  - 디스크에 저장된 db와 데이터 사전을 관리하고, 여기에 실제로 접근하는 역할 담당
  - 디스크에 저장된 데이터에 접근하는 것은 운영체제의 도움이 필요함
